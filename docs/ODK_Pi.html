<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.556">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chrissy h Roberts">

<title>Code Book - 28&nbsp; ODK Pi - A deployable version of ODK on a Raspberry Pi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Balanced_Prioritisation.html" rel="next">
<link href="./ODK_geofencing.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ODK_Biometrics.html">ODK</a></li><li class="breadcrumb-item"><a href="./ODK_Pi.html"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">ODK Pi - A deployable version of ODK on a Raspberry Pi</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Code Book</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">R | RStudio</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Basics of R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./extract_model_from_geom_smooth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Extract Model from geom_smooth model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./filename_changer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Rename files procedurally</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Global_Political_Map.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Draw Political Maps (sf geom_sf)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Quick_Country_Maps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Install necessary packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./photo_cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Photo Cleaning For Sharing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./remove_accents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Remove_Accents</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./text_to_speech_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Text to Speech in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./UK_Postcodes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">UK Postcode Maps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./update_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Update R - Bare Bones</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./utf8_encoding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Normalise utf8 accented text</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Statistics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Cumulative_Incidence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Cumulative Incidence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Interrupted_Time_Series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Segmented Regression Analysis of Interrupted Time Series</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./new_lm_predict_left_predict_right.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">New lm Predict Left &amp; Predict Right</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Diagnostics_Power_Calculation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Diagnostic Evaluation Power Calculation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CI95_point_estimate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">95% Confidence Intervals on a point estimate</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hazratio_chart.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Hazard Ratio Chart from Summary Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./power_calc_gen_case_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Genetic Power Calculator</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Principal_Components_Analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Principal Components Analysis</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Laboratory | Field Methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Consent_Forms_with_QR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Consent Forms with Unique IDs and QR Codes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Digital_Luminex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Digital Luminex</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Generic_Research_Data_Folder_Design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Research study folder template</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FPC_Grader.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">FPC Grader</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">ODK</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ODK_Biometrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">ODK Biometrics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ODK_UUID.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Unique Identifiers for ODK ecosystem online surveys</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ruODK_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">ruODK Setup and basic functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ODK_geofencing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">ODK Geofencing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ODK_Pi.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">ODK Pi - A deployable version of ODK on a Raspberry Pi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Balanced_Prioritisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Balanced Prioritisation Tools For One Health</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./XLSForm_Dictionary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">XLSForm Data Dictionary</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CSV_populate_Central.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Upload CSV file to ODK Central</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Python, bash and other code</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Docker_install_ubuntu.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Install Docker</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Join_photos_randomly.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Join Photos side-by-side with tracked random arrangement</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Whisper_Ai_CPU.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Whisper Ai - General Purpose CPU Method</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Software</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Add_QR_Codes_to_PDF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">QR Adder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./badger2040w.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Badger 2040w code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./comic2pdf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Comic formats to PDF</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Computer_Vision.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Computer Vision</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CUPS_Zebra_Printer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Zebra ZT220 CUPS Printing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./remarkable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Remarkable 2 / Paper Pro Template Hacks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./SayMyName.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Say My Name</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#odk_pi" id="toc-odk_pi" class="nav-link active" data-scroll-target="#odk_pi"><span class="header-section-number">29</span> ODK_Pi</a>
  <ul class="collapse">
  <li><a href="#note" id="toc-note" class="nav-link" data-scroll-target="#note"><span class="header-section-number">29.1</span> <strong>Note</strong></a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background"><span class="header-section-number">29.2</span> Background</a></li>
  <li><a href="#equipment" id="toc-equipment" class="nav-link" data-scroll-target="#equipment"><span class="header-section-number">29.3</span> <strong>Equipment</strong></a></li>
  <li><a href="#r-pi-setup" id="toc-r-pi-setup" class="nav-link" data-scroll-target="#r-pi-setup"><span class="header-section-number">29.4</span> <strong>R Pi Setup</strong></a>
  <ul class="collapse">
  <li><a href="#update-list-of-packages-and-remove-bloatware" id="toc-update-list-of-packages-and-remove-bloatware" class="nav-link" data-scroll-target="#update-list-of-packages-and-remove-bloatware"><span class="header-section-number">29.4.1</span> Update list of packages and remove bloatware</a></li>
  <li><a href="#add-required-packages" id="toc-add-required-packages" class="nav-link" data-scroll-target="#add-required-packages"><span class="header-section-number">29.4.2</span> Add required packages</a></li>
  <li><a href="#install-java-development-kit-jdk" id="toc-install-java-development-kit-jdk" class="nav-link" data-scroll-target="#install-java-development-kit-jdk"><span class="header-section-number">29.4.3</span> Install Java Development Kit (JDK)</a></li>
  <li><a href="#get-odk-briefcase" id="toc-get-odk-briefcase" class="nav-link" data-scroll-target="#get-odk-briefcase"><span class="header-section-number">29.4.4</span> Get odk briefcase</a></li>
  <li><a href="#set-jar-files-to-open-on-double-click" id="toc-set-jar-files-to-open-on-double-click" class="nav-link" data-scroll-target="#set-jar-files-to-open-on-double-click"><span class="header-section-number">29.4.5</span> Set Jar files to open on double click</a></li>
  <li><a href="#add-support-for-connecting-android-devices" id="toc-add-support-for-connecting-android-devices" class="nav-link" data-scroll-target="#add-support-for-connecting-android-devices"><span class="header-section-number">29.4.6</span> Add support for connecting android devices</a></li>
  <li><a href="#wireless-push-of-instances-from-android-to-rpi" id="toc-wireless-push-of-instances-from-android-to-rpi" class="nav-link" data-scroll-target="#wireless-push-of-instances-from-android-to-rpi"><span class="header-section-number">29.4.7</span> Wireless push of instances from Android to RPi</a></li>
  <li><a href="#if-you-want-to-run-a-shell-script-by-double-clicking" id="toc-if-you-want-to-run-a-shell-script-by-double-clicking" class="nav-link" data-scroll-target="#if-you-want-to-run-a-shell-script-by-double-clicking"><span class="header-section-number">29.4.8</span> If you want to run a shell script by double clicking</a></li>
  <li><a href="#install-r-and-pandoc" id="toc-install-r-and-pandoc" class="nav-link" data-scroll-target="#install-r-and-pandoc"><span class="header-section-number">29.4.9</span> Install R and pandoc</a></li>
  <li><a href="#change-priority-of-wifi-networks" id="toc-change-priority-of-wifi-networks" class="nav-link" data-scroll-target="#change-priority-of-wifi-networks"><span class="header-section-number">29.4.10</span> Change priority of WIFI networks</a></li>
  </ul></li>
  <li><a href="#for-uk-academics-on-eduroam" id="toc-for-uk-academics-on-eduroam" class="nav-link" data-scroll-target="#for-uk-academics-on-eduroam"><span class="header-section-number">29.5</span> For UK academics on Eduroam</a></li>
  <li><a href="#hotswitching-between-networks" id="toc-hotswitching-between-networks" class="nav-link" data-scroll-target="#hotswitching-between-networks"><span class="header-section-number">29.6</span> Hotswitching between networks</a></li>
  <li><a href="#set-up-github" id="toc-set-up-github" class="nav-link" data-scroll-target="#set-up-github"><span class="header-section-number">29.7</span> Set up github</a></li>
  <li><a href="#dropbox" id="toc-dropbox" class="nav-link" data-scroll-target="#dropbox"><span class="header-section-number">29.8</span> Dropbox</a></li>
  <li><a href="#backup-your-sd-card-so-that-you-can-use-it-elsewhere-or-recover-from-mishaps" id="toc-backup-your-sd-card-so-that-you-can-use-it-elsewhere-or-recover-from-mishaps" class="nav-link" data-scroll-target="#backup-your-sd-card-so-that-you-can-use-it-elsewhere-or-recover-from-mishaps"><span class="header-section-number">29.9</span> Backup your SD card so that you can use it elsewhere or recover from mishaps</a></li>
  <li><a href="#add-a-pitft-screen" id="toc-add-a-pitft-screen" class="nav-link" data-scroll-target="#add-a-pitft-screen"><span class="header-section-number">29.10</span> Add a PiTFT screen</a>
  <ul class="collapse">
  <li><a href="#set-up-screen-to-work-better" id="toc-set-up-screen-to-work-better" class="nav-link" data-scroll-target="#set-up-screen-to-work-better"><span class="header-section-number">29.10.1</span> <strong>Set up screen to work better</strong></a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ODK_Biometrics.html">ODK</a></li><li class="breadcrumb-item"><a href="./ODK_Pi.html"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">ODK Pi - A deployable version of ODK on a Raspberry Pi</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">ODK Pi - A deployable version of ODK on a Raspberry Pi</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Chrissy h Roberts </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="odk_pi" class="level1" data-number="29">
<h1 data-number="29"><span class="header-section-number">29</span> ODK_Pi</h1>
<p>A deployable ODK Briefcase based data hub based on Raspberry Pi Raspbian.</p>
<section id="note" class="level2" data-number="29.1">
<h2 data-number="29.1" class="anchored" data-anchor-id="note"><span class="header-section-number">29.1</span> <strong>Note</strong></h2>
<p>This is quite outdated and requires access to an old version of ODK Briefcase, which is no longer supported. We can’t vouch for security. Consider this an antique!</p>
</section>
<section id="background" class="level2" data-number="29.2">
<h2 data-number="29.2" class="anchored" data-anchor-id="background"><span class="header-section-number">29.2</span> Background</h2>
<p>Some of our users are working in areas with little or no internet connection, so a portable hub for aggregating data in the field, which is able to later push data to ODK aggregate is a useful interim/backup device that can also be preconfigured to output CSVs, PDF copies of data and so on for on the ground data needs.</p>
<p>The ODK briefcase software provides all the functionality we need for this purpose. The benefits of putting briefcase on to a Raspberry Pi (RPi) are</p>
<ul>
<li>The small size and weight of the RPi mean that you could send it in the post, carry it in your pocket and include it as a ‘just in case’ plan B measure for studies where your baggage allowance is only what you can carry.</li>
<li>Dedicated system means you don’t have to ‘donate’ your own laptop to study team for the duration of the work.</li>
<li>The RPi costs ~£35 and can be used with a tablet/phone/TV as display and touchscreen/keyboard/mouse as I/O devices</li>
<li>Runs off pretty much any power source and has low consumption and heat output. Can be run inside a tupperware box, so good off grid, in the rainforest and so on.</li>
<li>Provides full linux system including encryption/decryption, R, Python, Java etc.</li>
<li>SD cards can be cloned, meaning that you can take a box of RPis and set up as many hubs as you need if the scale of project grows.</li>
</ul>
<p>These instructions should be sufficient to set up a new installation of the Raspbian operating system, then to install any necessary packages and software (including ODK Briefcase). It will also help you to set up the system so that you can work with Android devices via the MTP protocol (which is not especially obvious) and various other tips and tricks that make all these things fit together.</p>
<p>Nothing in this guide is particularly difficult and not novel, but I think this is the first place where everything is listed as a single set of instructions.</p>
</section>
<section id="equipment" class="level2" data-number="29.3">
<h2 data-number="29.3" class="anchored" data-anchor-id="equipment"><span class="header-section-number">29.3</span> <strong>Equipment</strong></h2>
<p><a href="https://www.raspberrypi.org/">Raspberry Pi</a> (Tested on R Pi 3 B+)<br>
SDHC Micro SD card (16 GB tested) formatted to FAT / FAT32<br>
Noobs <a href="https://www.raspberrypi.org/downloads/noobs/" class="uri">https://www.raspberrypi.org/downloads/noobs/</a></p>
</section>
<section id="r-pi-setup" class="level2" data-number="29.4">
<h2 data-number="29.4" class="anchored" data-anchor-id="r-pi-setup"><span class="header-section-number">29.4</span> <strong>R Pi Setup</strong></h2>
<ul>
<li><p>Install Noobs as per <a href="https://www.raspberrypi.org/downloads/noobs/">instructions</a>. Tested on Noobs Lite (Network install)</p>
<ol type="1">
<li>Copy all files from noobs folder on to SDHC card<br>
</li>
<li>Plug SD card in to RPi.</li>
</ol></li>
<li><p>Power on the RPi, connect to Wifi, follow steps to install Raspbian and update</p></li>
</ul>
<p><strong>You should now have a basic RPi installation of raspbian</strong></p>
<ul>
<li>Fiddle around with your wifi settings, bluetooth etc.<br>
</li>
<li>Open Terminal</li>
</ul>
<p>======= ### Get current date and time from internet at startup<br>
The RPi doesn’t have a real time clock onboard, so I’d recommend putting on a clock board if using this in the field. Otherwise you’ll be relying on internet time. For the time being though, let’s stick with the basic board and grab internet time at startup.</p>
<p><code>sudo nano /etc/rc.local</code></p>
<ul>
<li>Add the following line to the rc.local file above where it says <em>exit 0</em></li>
</ul>
<p><code>date -s "$(wget -qSO- --max-redirect=0 google.com 2&gt;&amp;1 | grep Date: | cut -d' ' -f5-8)Z"</code></p>
<section id="update-list-of-packages-and-remove-bloatware" class="level3" data-number="29.4.1">
<h3 data-number="29.4.1" class="anchored" data-anchor-id="update-list-of-packages-and-remove-bloatware"><span class="header-section-number">29.4.1</span> Update list of packages and remove bloatware</h3>
<p>I’m guessing you don’t want to play Minecraft on this RPi (though it is a great game) so let’s save about 1.5 GB of SD card space and remove bloatware that comes preinstalled on this version of Raspbian.</p>
<pre><code>sudo apt-get update  
sudo apt-get upgrade
sudo apt-get remove --purge wolfram-engine scratch2 libreoffice* scratch minecraft-pi sonic-pi dillo gpicview</code></pre>
<ul>
<li>select ‘y’ or ‘Y’ when prompted to remove these packages</li>
<li>clean up leftover dependencies from removed packages</li>
</ul>
<pre><code>sudo apt-get clean
sudo apt-get autoremove</code></pre>
</section>
<section id="add-required-packages" class="level3" data-number="29.4.2">
<h3 data-number="29.4.2" class="anchored" data-anchor-id="add-required-packages"><span class="header-section-number">29.4.2</span> Add required packages</h3>
<p>This will add a bunch of useful things that you need</p>
<pre><code>sudo apt-get install apt-file
sudo apt-file update</code></pre>
<pre><code>sudo apt-get install libcurl4-openssl-dev libssl-dev libxml2 libxml2-dev libgdal-dev usbmount </code></pre>
</section>
<section id="install-java-development-kit-jdk" class="level3" data-number="29.4.3">
<h3 data-number="29.4.3" class="anchored" data-anchor-id="install-java-development-kit-jdk"><span class="header-section-number">29.4.3</span> Install Java Development Kit (JDK)</h3>
<pre><code>sudo apt-get install ca-certificates-java  
sudo apt-get install openjdk-9-jre</code></pre>
</section>
<section id="get-odk-briefcase" class="level3" data-number="29.4.4">
<h3 data-number="29.4.4" class="anchored" data-anchor-id="get-odk-briefcase"><span class="header-section-number">29.4.4</span> Get odk briefcase</h3>
<pre><code>curl --silent "https://api.github.com/repos/opendatakit/briefcase/releases/latest" | grep "browser_download_url" | sed -E 's/.*"([^"]+)".*/\1/' |xargs wget</code></pre>
</section>
<section id="set-jar-files-to-open-on-double-click" class="level3" data-number="29.4.5">
<h3 data-number="29.4.5" class="anchored" data-anchor-id="set-jar-files-to-open-on-double-click"><span class="header-section-number">29.4.5</span> Set Jar files to open on double click</h3>
<p>You probably don’t want to have to start ODK Briefcase from the command line every time you use it, so this will make jar files run by double-clicking them</p>
<ul>
<li>Add a java.desktop file to tell OS how to handle .jar files</li>
</ul>
<pre><code>sudo nano /usr/share/applications/java.desktop </code></pre>
<pre><code>[[Desktop Entry]
Name=Java
Comment=Java
GenericName=Java
Keywords=java
Exec=/usr/bin/java -jar %f
Terminal=false
X-MultipleArgs=false
Type=Application
MimeType=application/x-java-archive
StartupNotify=true</code></pre>
<p>Close the <em>‘nano’</em> text editor by pressing <em>CTRL</em> &amp; <em>C</em> and then press <em>“Y”</em> to save the new file</p>
<p>After adding this file you should be able to find an entry called Java in the <em>Open file with…</em> dialog when you right click the jar file.</p>
<p>Select <em>always open with this program</em> and you are set to go.</p>
<p>ODK Briefcase should now be able to download data and export decrypted data when provided with a private key (.pem).</p>
</section>
<section id="add-support-for-connecting-android-devices" class="level3" data-number="29.4.6">
<h3 data-number="29.4.6" class="anchored" data-anchor-id="add-support-for-connecting-android-devices"><span class="header-section-number">29.4.6</span> Add support for connecting android devices</h3>
<p>Android uses the MTP protocol to connect to linux. This is no doubt safer but is a lot <em>weirder</em> than the old fashioned approach where it just mounted your tablet as a USB drive on your computer. Without a bit of jiggery pokery it’s hard to figure out how to find the folders. The next few steps make it much easier.</p>
<pre><code>sudo apt-get install gvfs-backends gvfs-bin gvfs-fuse gvfs-daemons  </code></pre>
<ul>
<li>Plug in and unlock an Android device</li>
<li>Find generic parent location of mount using</li>
</ul>
<p><code>mount | grep 'gvfsd-fuse'</code></p>
<ul>
<li>example</li>
</ul>
<blockquote class="blockquote">
<p>gvfsd-fuse on <strong>/run/user/1000/gvfs</strong> type fuse.gvfsd-fuse (rw,nosuid,nodev,relatime,user_id=1000,group_id=1000)</p>
</blockquote>
<ul>
<li>the key folder here is <strong>/run/user/1000/gvfs/</strong> but it might be different on your system</li>
<li>Change to the root directory and create a symlink to the parent directory</li>
</ul>
<pre><code>cd ~
ln -s /run/user/1000/gvfs Android_Device</code></pre>
<ul>
<li>Open a file manager window and select <em>Edit</em> &gt; <em>Preferences</em> &gt; <em>Volume Management</em></li>
<li>Unselect <em>“Show available options for removable media…”</em></li>
</ul>
<p>You should now have a folder called “Android_Device” in the root directory. When a device is connected to the RPi, this folder should automagically get a new subfolder for the Android MTP protocol.</p>
<ul>
<li>Connect an Android device by USB cable</li>
<li>Unlock the device</li>
<li>Select “Yes” to any query about using USB/MTB for transfer</li>
<li>If you navigate to the <em>Android_Device</em> folder you should see a folder called <em>mtp:host…</em> This has the device’s file system inside</li>
<li>If you don’t see that folder, press F5 to refresh</li>
<li>When you switch devices, press F5 to update the folder.</li>
</ul>
<p><strong>ODK briefcase should now be able to pull all data from devices via the “Android_Devices” Folder.</strong></p>
<p>Navigate to it and you’ll see a uniquely named folder under which you should see the internal and SD card folders of your device. Inside one or the other will be your <em>ODK</em> folder. That’s the one that ODK Briefcase can pull instances from.</p>
</section>
<section id="wireless-push-of-instances-from-android-to-rpi" class="level3" data-number="29.4.7">
<h3 data-number="29.4.7" class="anchored" data-anchor-id="wireless-push-of-instances-from-android-to-rpi"><span class="header-section-number">29.4.7</span> Wireless push of instances from Android to RPi</h3>
<p>You can send forms to the RPi through sftp using the excellent <a href="https://play.google.com/store/apps/details?id=lysesoft.andftp&amp;hl=en_US"><strong>andFTP</strong></a></p>
</section>
<section id="if-you-want-to-run-a-shell-script-by-double-clicking" class="level3" data-number="29.4.8">
<h3 data-number="29.4.8" class="anchored" data-anchor-id="if-you-want-to-run-a-shell-script-by-double-clicking"><span class="header-section-number">29.4.8</span> If you want to run a shell script by double clicking</h3>
<p>This can be useful if you have downstream stuff going on, or if you want to write a script to control a batch of ODK briefcase operations from the command line interface (CLI).</p>
<ul>
<li>Create a *.desktop file in your /usr/share/applications</li>
<li>Example - <em>do.stuff.sh</em></li>
</ul>
<p><code>nano /usr/share/applications/do.stuff.desktop</code></p>
<pre><code>[Desktop Entry]
Version=1.0  
Exec=/home/yourname/bin/do.stuff.sh  
Name=SSH Server  
GenericName=SSH Server  
Comment=Run the do stuff script  
Encoding=UTF-8  
Terminal=true  
Type=Application  
Categories=Application;Network;</code></pre>
<p>Use <em>open with…</em> and <em>set as default</em> and then script will run on double click</p>
</section>
<section id="install-r-and-pandoc" class="level3" data-number="29.4.9">
<h3 data-number="29.4.9" class="anchored" data-anchor-id="install-r-and-pandoc"><span class="header-section-number">29.4.9</span> Install R and pandoc</h3>
<p>Useful for analysis (R) and reporting (Pandoc) <code>sudo apt-get install r-base r-base-dev pandoc pandoc-citeproc</code></p>
</section>
<section id="change-priority-of-wifi-networks" class="level3" data-number="29.4.10">
<h3 data-number="29.4.10" class="anchored" data-anchor-id="change-priority-of-wifi-networks"><span class="header-section-number">29.4.10</span> Change priority of WIFI networks</h3>
<p>This can be useful if you want to control the precedence of networks joined over wifi.</p>
<p><code>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</code></p>
<p>Add priority=2 to the <em>wifi_B</em> block and priority=1 to the <em>wifi_A</em> block in the file. Higher number is higher priority so here <em>wifi_B</em> will be joined by preference</p>
<pre><code>network={  
    ssid = "wifi_A"  
    psk = "passwordOfA"  
    priority = 1  
}  
network={  
   ssid = "wifi_B"  
   psk = "passwordOfB"  
   priority = 2  
}</code></pre>
</section>
</section>
<section id="for-uk-academics-on-eduroam" class="level2" data-number="29.5">
<h2 data-number="29.5" class="anchored" data-anchor-id="for-uk-academics-on-eduroam"><span class="header-section-number">29.5</span> For UK academics on Eduroam</h2>
<p>Eduroam is a UK wide wifi provider for cross-institutional working. It can be hard to set up on RPi, but instructions <a href="http://jankuester.com/connecting-raspberry-pi-to-eduroam-using-wpa-supplicant/">here</a> should be helpful. Below worked for me.</p>
<p><code>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</code></p>
<pre><code>ctrl_interface=/var/run/wpa_supplicant
ctrl_interface_group=netdev

country=GB

network={
ssid="eduroam"
key_mgmt=WPA-EAP
eap=PEAP
phase2="auth=MSCHAPV2"
identity="username@youruniversity.ac.uk"
anonymous_identity="anonymous@youruniversity.ac.uk"
password="pwd"
}</code></pre>
</section>
<section id="hotswitching-between-networks" class="level2" data-number="29.6">
<h2 data-number="29.6" class="anchored" data-anchor-id="hotswitching-between-networks"><span class="header-section-number">29.6</span> Hotswitching between networks</h2>
<p>Linux provides a nice easy way to switch between networks. A simple sh script would provide a nice clickable way to switch via a GUI, but on RPi you get the added bonus that you can connect physical switches to the pins. A push button could be used to switch between wifi networks (i.e.&nbsp;to move from a fully online network to an offline local wifi network provided by a hotspot. The latter is very useful if you want to use VNC software to allow using an Android tablet as a screen and interface to RPi whilst in the field.</p>
<ul>
<li>To shift from one network to another</li>
</ul>
<p><code>wpa_cli select_network 0</code> or number of network is all you need to do.</p>
</section>
<section id="set-up-github" class="level2" data-number="29.7">
<h2 data-number="29.7" class="anchored" data-anchor-id="set-up-github"><span class="header-section-number">29.7</span> Set up github</h2>
<p>Github provides a nice way to get updated analysis scripts on to the RPi automatically. Git is built in to the Raspbian OS, so you just need to connect to GitHub to get your scripts</p>
<pre><code>git config --global user.name "USERNAME"  
git config --global user.email "you@youremail.com"  
git config --global core.editor nano</code></pre>
<p>You could add a git pull script at startup to ensure that all scripts are updated on startup. Alternatively you could set up a cron task.</p>
<p>To run a script after login</p>
<pre><code>sudo nano /etc/profile</code></pre>
<p>Add the following line to the end of the file</p>
<pre><code>./home/pi/your_script_name.sh</code></pre>
</section>
<section id="dropbox" class="level2" data-number="29.8">
<h2 data-number="29.8" class="anchored" data-anchor-id="dropbox"><span class="header-section-number">29.8</span> Dropbox</h2>
<p>Dropbox is a convenient way to get data back off an RPi, though not recommended for sensitive data (at the very least you should encrypt the data).</p>
<p>Dropbox integration for RPi is not great, but <a href="https://github.com/andreafabrizi/Dropbox-Uploader">Dropbox Uploader</a> is an excellent script for moving stuff to and from Dropbox. <a href="https://www.raspberrypi.org/magpi/dropbox-raspberry-pi/">These instructions</a> are also very useful.</p>
<ul>
<li>Visit <a href="https://github.com/andreafabrizi/Dropbox-Uploader">Dropbox Uploader</a> follow the instructions in the README.MD for the most up to date instructions.</li>
</ul>
</section>
<section id="backup-your-sd-card-so-that-you-can-use-it-elsewhere-or-recover-from-mishaps" class="level2" data-number="29.9">
<h2 data-number="29.9" class="anchored" data-anchor-id="backup-your-sd-card-so-that-you-can-use-it-elsewhere-or-recover-from-mishaps"><span class="header-section-number">29.9</span> Backup your SD card so that you can use it elsewhere or recover from mishaps</h2>
<p><strong>BEWARE</strong> that you have to use the right mount point (in the example I used /dev/disk3). If you try to write to the wrong disk when restoring the SD card, then you will probably brick your system.</p>
<p>Run <code>df</code> to see what mounts you have. Identify which one is the disk you want to restore to.</p>
<p>To clone RPi SD Card <code>sudo dd if=/dev/disk3 of=/Volumes/RPi_Backups/name bs=1m</code></p>
<p>To restore RPi SD Card <code>sudo dd if=/Volumes/RPi_Backups/name of=/dev/disk3 bs=1m</code></p>
</section>
<section id="add-a-pitft-screen" class="level2" data-number="29.10">
<h2 data-number="29.10" class="anchored" data-anchor-id="add-a-pitft-screen"><span class="header-section-number">29.10</span> Add a PiTFT screen</h2>
<p>Tested using the AdaFruit Assembled 480x320 3.5” TFT+ Touchscreen (Resistive)</p>
<ul>
<li>To install the screen
<ul>
<li>Shut down the RPi</li>
<li>Plug the screen on to the GPIO pins of the RPi</li>
<li>Boot up to Raspbian</li>
</ul></li>
</ul>
<pre><code>cd ~
wget https://raw.githubusercontent.com/adafruit/Raspberry-Pi-Installer-Scripts/master/adafruit-pitft.sh
chmod +x adafruit-pitft.sh
sudo ./adafruit-pitft.sh</code></pre>
<p>The script will attempt to install the screen automatically. When prompted to select the configuration, choose the screen you are installing, for instance &gt; 4. PiTFT 3.5” resistive touch (320x480)</p>
<p>Next you need to select the screen rotation you want, for instance &gt; 1. 90 Degrees (Landscape)</p>
<p>The next two steps determine the best setting for the screen</p>
<blockquote class="blockquote">
<p>Would you like the console to appear on the PiTFT display?</p>
</blockquote>
<p>This option is good if you want to use the screen as a console window. There’s no HDMI output with this config and to be honest I think it is not what most people want, so select <code>No</code> to this one.</p>
<blockquote class="blockquote">
<p>Would you like the HDMI display to mirror to the PiTFT display?</p>
</blockquote>
<p>This option will mirror the HDMI output to the PiTFT screen, so is the better choice for most people. Select <code>Yes</code> to this option.</p>
<p>After rebooting, the screen should start working, with some fairly clunky but functional touch support. (Hint : Use a pointy bit of plastic to get screen to work as a mouse)</p>
<section id="set-up-screen-to-work-better" class="level3" data-number="29.10.1">
<h3 data-number="29.10.1" class="anchored" data-anchor-id="set-up-screen-to-work-better"><span class="header-section-number">29.10.1</span> <strong>Set up screen to work better</strong></h3>
<ul>
<li>Open terminal then go to <code>Edit</code> menu, followed by <code>Preferences</code>.</li>
<li>Change the font to something a bit clearer like <code>Monospace 14 Bold</code></li>
</ul>
<p>Add some commands to the <code>bin</code> folder to allow hotswitching of the screen (saves power if you don’t need it on).</p>
<ul>
<li>Make a command for turning screen off</li>
</ul>
<pre><code>sudo nano /usr/bin/scroff</code></pre>
<p>Add this line to the file</p>
<pre><code>sudo sh -c 'echo "0" &gt; /sys/class/backlight/soc\:backlig
ht/brightness'</code></pre>
<p>press <code>CTRL + C</code> and <code>Y</code> to save the file and close nano</p>
<ul>
<li>Make a command for turning screen on</li>
</ul>
<pre><code>sudo nano /usr/bin/scron</code></pre>
<p>Add this line to the file</p>
<pre><code>sudo sh -c 'echo "1" &gt; /sys/class/backlight/soc\:backlig
ht/brightness'</code></pre>
<p>press <code>CTRL + C</code> and <code>Y</code> to save the file and close nano</p>
<p>Make both commands executable</p>
<pre><code>sudo chmod +x /usr/bin/scroff
sudo chmod +x /usr/bin/scron</code></pre>
<p>Then test that they work</p>
<pre><code>scroff</code></pre>
<p>should turn the screen off and <code>scron</code> should turn it on again.</p>
<ul>
<li>Add a software keyboard<br>
Quite hard to use on tiny screen, but could be useful in a pinch</li>
</ul>
<pre><code>sudo apt-get install matchbox-keyboard
sudo apt-get install libmatchbox1 -y 
sudo nano /usr/bin/toggle-matchbox-keyboard.sh</code></pre>
<p>Add this text to the <code>toggle-matchbox-keyboard.sh</code> file.</p>
<pre><code>#!/bin/bash
#This script toggle the virtual keyboard

PID=`pidof matchbox-keyboard`
if [ ! -e $PID ]; then
  killall matchbox-keyboard
else
 matchbox-keyboard&amp;
fi</code></pre>
<p>Then close file and make executable</p>
<pre><code>sudo chmod +x /usr/bin/toggle-matchbox-keyboard.sh</code></pre>
<p>Keyboard can then be accessed through <code>menu</code> &gt; <code>Accessories</code> &gt; <code>Keyboard</code></p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./ODK_geofencing.html" class="pagination-link" aria-label="ODK Geofencing">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">ODK Geofencing</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Balanced_Prioritisation.html" class="pagination-link" aria-label="Balanced Prioritisation Tools For One Health">
        <span class="nav-page-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Balanced Prioritisation Tools For One Health</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>